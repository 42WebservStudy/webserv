<!DOCTYPE html>
<html>
<head>
    <title>File Upload</title>
</head>
<body>
    <form id="uploadForm" enctype="multipart/form-data">
        <input type="file" id="fileInput" name="file">
        <button type="button" id="uploadButton" onclick="uploadFile()">Upload File</button>
    </form>
    <div id="progressDiv" style="display: none;">
        Uploading... <progress id="progressBar" value="0" max="100"></progress>
    </div>

    <script>
        function uploadFile() {
            // Disable the upload button to prevent multiple submissions
            document.getElementById("uploadButton").disabled = true;

            // Display the progress bar
            document.getElementById("progressDiv").style.display = "block";

            // Get the file input element
            var fileInput = document.getElementById("fileInput");

            // Create a FormData object to send the file
            var formData = new FormData();
            formData.append("file", fileInput.files[0]);

            // Create an XMLHttpRequest object to send the file
            var xhr = new XMLHttpRequest();

            // Configure the request
            xhr.open("POST", `${window.location.origin}/input/`, true);

            // Update progress bar
            xhr.upload.onprogress = function (e) {
                if (e.lengthComputable) {
                    var percentComplete = (e.loaded / e.total) * 100;
                    document.getElementById("progressBar").value = percentComplete;
                }
            };

            // Handle the response when the upload is complete
            xhr.onload = function () {
                if (xhr.status === 200 || xhr.status === 201) {
                    // Successful upload
                    alert("File uploaded successfully!");
                } else {
                    // Failed upload
                    alert("File upload failed!");
                }

                // Re-enable the upload button
                document.getElementById("uploadButton").disabled = false;

                // Hide the progress bar
                document.getElementById("progressDiv").style.display = "none";
            };

            // Send the FormData
            xhr.send(formData);
        }
    </script>
</body>
</html>